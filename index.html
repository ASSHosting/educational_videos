<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lehrvideos – Übersicht</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --surface: #ffffff;
      --brand: #631832;
      --accent: #173262;
      --text: #231A24;
      --link: #606F8C;
      --muted: #606F8C;
      --border: #d7dce8;
      --shadow: 0 10px 24px rgba(23, 50, 98, 0.08);
      --radius: 16px;
      --max: 1100px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: radial-gradient(circle at top right, #eef2fa 0%, var(--bg) 48%);
      color: var(--text);
      line-height: 1.45;
    }

    a {
      color: var(--link);
    }

    .page {
      max-width: var(--max);
      margin: 0 auto;
      padding: 28px 16px 56px;
    }

    .hero {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 28px 22px;
      margin-bottom: 22px;
      text-align: center;
    }

    h1 {
      margin: 0 0 8px;
      font-size: clamp(1.8rem, 3.5vw, 2.4rem);
      color: var(--brand);
    }

    .hero-logo {
      width: clamp(88px, 13vw, 132px);
      height: auto;
      display: block;
      margin: 0 auto 12px;
    }

    .subtitle {
      margin: 0 auto;
      color: var(--muted);
      max-width: 72ch;
    }

    .search-wrap {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .search-input,
    .category-filter-input {
      width: 100%;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 12px;
      font: inherit;
      color: var(--text);
      background: #fff;
    }

    .search-input {
      flex: 1 1 340px;
    }

    .search-input:focus-visible,
    .category-filter-input:focus-visible {
      outline: 2px solid rgba(23, 50, 98, 0.45);
      outline-offset: 1px;
    }

    .category {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 16px;
      overflow: hidden;
    }

    .category-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
      padding: 16px 18px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(90deg, #f7f1f4, #eef2fa);
    }

    .category-title {
      margin: 0;
      font-size: 1.2rem;
      color: var(--brand);
    }

    .category-meta {
      margin: 0;
      color: var(--muted);
      font-size: 0.9rem;
    }

    .category-filter {
      margin: 0;
      padding: 0 12px 12px;
    }

    .videos {
      list-style: none;
      margin: 0;
      padding: 12px;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 10px;
    }

    .video-item {
      grid-column: span 12;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      background: #fff;
    }

    .video-title {
      margin: 0;
      font-weight: 700;
    }

    .video-link {
      display: inline-block;
      text-decoration: none;
      color: #fff;
      background: var(--brand);
      border-radius: 10px;
      padding: 9px 12px;
      font-weight: 700;
      white-space: nowrap;
    }

    .video-link:hover,
    .video-link:focus-visible {
      background: var(--accent);
      color: #fff;
    }

    .reset-btn {
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
      border-radius: 10px;
      padding: 10px 12px;
      font: inherit;
      font-weight: 600;
      cursor: pointer;
    }

    .reset-btn:hover,
    .reset-btn:focus-visible {
      background: #eff3fa;
      border-color: rgba(23, 50, 98, 0.35);
    }

    .footer {
      text-align: center;
      color: var(--muted);
      font-size: 0.86rem;
      margin-top: 18px;
    }

    .empty-state {
      background: var(--surface);
      border: 1px dashed var(--border);
      border-radius: var(--radius);
      padding: 18px;
      color: var(--muted);
      text-align: center;
    }

    .lightbox[hidden] {
      display: none;
    }

    .lightbox {
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: rgba(35, 26, 36, 0.92);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 22px;
    }

    .lightbox-panel {
      width: min(96vw, 1400px);
      max-height: 94vh;
      position: relative;
    }

    .lightbox-video {
      width: 100%;
      max-height: 92vh;
      border-radius: 10px;
      background: #000;
      box-shadow: 0 18px 36px rgba(0, 0, 0, 0.45);
    }

    .lightbox-close {
      position: absolute;
      top: -14px;
      right: -14px;
      width: 36px;
      height: 36px;
      border: none;
      border-radius: 999px;
      background: var(--brand);
      color: #fff;
      font-size: 1.35rem;
      line-height: 1;
      cursor: pointer;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.35);
    }

    .lightbox-close:hover,
    .lightbox-close:focus-visible {
      background: var(--accent);
    }

    @media (min-width: 760px) {
      .video-item { grid-column: span 6; }
    }

    @media (min-width: 1050px) {
      .video-item { grid-column: span 4; }
    }
  </style>
</head>
<body>
  <div class="page">
    <section class="hero">
      <img
        class="hero-logo"
        src="https://as-digitalmarketing.de/img/ASS-2024-03_Logo2000x2000_black.png"
        alt="A.S. Digitalmarketing Logo"
      />
      <h1>Lehrvideos nach Kategorie</h1>
      <p class="subtitle">
        Diese Übersicht enthält alle verfügbaren Lehrvideos für VHS-Kurse, die KI-Akademie des BDS und den allgemeinen Unterricht.
        Klicke auf "Video öffnen", um die MP4-Datei direkt abzuspielen.
      </p>
      <div class="search-wrap">
        <input
          id="global-search"
          class="search-input"
          type="search"
          placeholder="Alle Videos durchsuchen (Titel oder Kategorie)"
          aria-label="Videos durchsuchen"
        />
        <button id="reset-filters" class="reset-btn" type="button">Filter zurücksetzen</button>
      </div>
    </section>

    <main id="video-categories" aria-label="Video-Kategorien"></main>

    <p class="footer">© <span id="year"></span> Lehrvideo-Übersicht</p>
  </div>

  <div id="video-lightbox" class="lightbox" hidden aria-hidden="true">
    <div class="lightbox-panel" role="dialog" aria-modal="true" aria-label="Videoansicht">
      <button id="lightbox-close" class="lightbox-close" type="button" aria-label="Video schließen">×</button>
      <video id="lightbox-video" class="lightbox-video" controls playsinline preload="metadata"></video>
    </div>
  </div>

  <script>
    const videoData = [
      {
        title: "VHS-Kurse",
        videos: [
          {
            name: "Cloud: Backup-Strategie",
            file: "vhs/vhs_cloud_backup.mp4"
          },
          {
            name: "Cloud-Basics: Digitale Zettelwirtschaft vermeiden",
            file: "vhs/vhs_cloud-basics_zettelwirtschaft.mp4"
          },
          {
            name: "Cloud: Struktur und Aufbau",
            file: "vhs/vhs_cloud_aufbau.mp4"
          },
          {
            name: "Cloud: Digitale Organisation im Alltag",
            file: "vhs/vhs_cloud_digitale-organisation.mp4"
          }
        ]
      },
      {
        title: "BDS KI-Akademie",
        videos: [
          {
            name: "Angebots-KI: Einführung und Praxis",
            file: "bds/bds_angebotski.mp4"
          }
        ]
      },
      {
        title: "Unterricht allgemein",
        videos: [
          {
            name: "Data Science: Datenvisualisierung",
            file: "educational/datascience_datenvisualisierung.mp4"
          }
        ]
      }
    ];

    const categoryFilters = {};
    let globalSearch = "";
    const lightbox = document.getElementById("video-lightbox");
    const lightboxVideo = document.getElementById("lightbox-video");
    const lightboxCloseButton = document.getElementById("lightbox-close");

    function matchesSearch(video, categoryTitle, searchTerm) {
      if (!searchTerm) return true;
      const haystack = `${video.name} ${categoryTitle}`.toLowerCase();
      return haystack.includes(searchTerm);
    }

    function renderVideos(categories) {
      const root = document.getElementById("video-categories");
      root.innerHTML = "";
      let visibleCategoryCount = 0;

      categories.forEach((category) => {
        const afterGlobalSearch = category.videos.filter((video) =>
          matchesSearch(video, category.title, globalSearch)
        );
        if (afterGlobalSearch.length === 0) return;

        const categoryFilter = (categoryFilters[category.title] || "").toLowerCase().trim();
        const visibleVideos = afterGlobalSearch.filter((video) =>
          !categoryFilter || video.name.toLowerCase().includes(categoryFilter)
        );
        if (visibleVideos.length === 0) return;

        const section = document.createElement("section");
        section.className = "category";

        const header = document.createElement("div");
        header.className = "category-header";
        header.innerHTML = `
          <h2 class="category-title">${category.title}</h2>
          <p class="category-meta">${visibleVideos.length} Video(s)</p>
        `;

        if (category.videos.length > 3) {
          const filterWrap = document.createElement("div");
          filterWrap.className = "category-filter";
          filterWrap.innerHTML = `
            <input
              class="category-filter-input"
              type="search"
              placeholder="Kategorie filtern: ${category.title}"
              aria-label="Filter für ${category.title}"
              value="${categoryFilters[category.title] || ""}"
            />
          `;
          const filterInput = filterWrap.querySelector(".category-filter-input");
          filterInput.addEventListener("input", (event) => {
            categoryFilters[category.title] = event.target.value;
            renderVideos(videoData);
          });
          section.appendChild(header);
          section.appendChild(filterWrap);
        } else {
          section.appendChild(header);
        }

        const list = document.createElement("ul");
        list.className = "videos";

        visibleVideos.forEach((video) => {
          const item = document.createElement("li");
          item.className = "video-item";
          item.innerHTML = `
            <div>
              <p class="video-title">${video.name}</p>
            </div>
            <a class="video-link" href="${video.file}">Video öffnen</a>
          `;
          list.appendChild(item);
        });

        section.appendChild(list);
        root.appendChild(section);
        visibleCategoryCount += 1;
      });

      if (visibleCategoryCount === 0) {
        const empty = document.createElement("p");
        empty.className = "empty-state";
        empty.textContent = "Keine Videos für den aktuellen Such- oder Filterbegriff gefunden.";
        root.appendChild(empty);
      }
    }

    const globalSearchInput = document.getElementById("global-search");
    const resetFiltersButton = document.getElementById("reset-filters");
    const videoCategories = document.getElementById("video-categories");

    function openLightbox(videoUrl) {
      lightboxVideo.src = videoUrl;
      lightbox.hidden = false;
      lightbox.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
      lightboxVideo.play().catch(() => {});
    }

    function closeLightbox() {
      lightboxVideo.pause();
      lightboxVideo.removeAttribute("src");
      lightboxVideo.load();
      lightbox.hidden = true;
      lightbox.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    renderVideos(videoData);
    globalSearchInput.addEventListener("input", (event) => {
      globalSearch = event.target.value.toLowerCase().trim();
      renderVideos(videoData);
    });
    resetFiltersButton.addEventListener("click", () => {
      globalSearch = "";
      globalSearchInput.value = "";
      Object.keys(categoryFilters).forEach((key) => {
        delete categoryFilters[key];
      });
      renderVideos(videoData);
    });
    videoCategories.addEventListener("click", (event) => {
      const link = event.target.closest(".video-link");
      if (!link) return;
      event.preventDefault();
      openLightbox(link.getAttribute("href"));
    });
    lightboxCloseButton.addEventListener("click", closeLightbox);
    lightbox.addEventListener("click", (event) => {
      if (event.target === lightbox) closeLightbox();
    });
    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape" && !lightbox.hidden) closeLightbox();
    });
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
